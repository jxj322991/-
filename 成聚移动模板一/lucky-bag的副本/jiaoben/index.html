<!DOCTYPE html>
<html>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<head>
    <title>jQuery老虎机转动抽奖程序 - 站长素材</title>
    <link rel="stylesheet" type="text/css" href="css/j_reset.min.css">
    <script type="text/javascript">
    function get_hfs() {
        document.documentElement.style.fontSize = document.documentElement.clientWidth / 10+ 'px';
    }
    get_hfs();

    function throttle(method, context) {
        clearTimeout(method.timer);
        method.timer = setTimeout(function() {
            method.call(context);
        }, 100);
    }
    window.onresize = function() {
        throttle(get_hfs);
    }
    </script>
</head>

<body>

    <div class="main2">
        <div class="container">

            <div class="num num1">
                <div class="num-con num-con1">
                    <div class="num-img"></div>
                    <div class="num-img"></div>
                </div>
            </div>
            <div class="num num2">
                <div class="num-con num-con2">
                    <div class="num-img"></div>
                    <div class="num-img"></div>
                </div>
            </div>
            <div class="num num3">
                <div class="num-con num-con3">
                    <div class="num-img"></div>
                    <div class="num-img"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="main3">
        <div class="container">
            <div class="main3-btn"></div>
        </div>
    </div>
</body>

</html>
<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript">

$(".main3-btn").click(function() {
    if (!flag) {
        flag = true;
        reset();
        letGo();
        setTimeout(function() {
            flag = false;
            if (index == 2) {
                $(".fix,.pop-form").show();
            } else {
                $(".fix,.pop").show();
                $(".pop-text span").text("" + String(4 - TextNum1) + (8 - TextNum2))
            }
        }, 4000);
        index++;
    }
});

var flag = false;
var index = 0;
var TextNum1
var TextNum2
var TextNum3

function letGo() {

    TextNum1 = parseInt(Math.random() * 4) //随机数
    TextNum2 = parseInt(Math.random() * 7)
    TextNum3 = parseInt(Math.random() * 7)

    var num1 = [-549, -668, -786, -904][TextNum1]; //在这里随机
    var num2 = [-1377, -1495, -1614, -430, -549, -668, -786, -904][TextNum2];
    var num3 = [-1377, -1495, -1614, -430, -549, -668, -786, -904][TextNum3];
    $(".num-con1").animate({
        "top": -1140
    }, 1000, "linear", function() {
        $(this).css("top", 0).animate({
            "top": num1
        }, 1000, "linear");
    });
    $(".num-con2").animate({
        "top": -1140
    }, 1000, "linear", function() {
        $(this).css("top", 0).animate({
            "top": num2
        }, 1800, "linear");
    });
    $(".num-con3").animate({
        "top": -1140
    }, 1000, "linear", function() {
        $(this).css("top", 0).animate({
            "top": num3
        }, 1300, "linear");
    });

}

function reset() {
    $(".num-con1,.num-con2,.num-con3").css({
        "top": -430
    });
}

</script>
</body>

</html>
